App.Router = Ember.Router.extend
  enableLogging: <%= Rails.env == 'development' %>

  root: Ember.Route.create
    index: Ember.Route.create
      route: '/'

      enter: (router) ->
        corpusId = 1  # TESTING!!!

        # Loading the corpus also includes metadata categories and values
        corpus = App.Corpus.find(corpusId)
        App.set('router.selectedCorpusController.content', corpus)


      connectOutlets: (router) ->
        appController = router.get('applicationController')

        appController.connectOutlet('leftSidebar', 'metadataAccordion')

        appController.connectOutlet
          outletName: 'corpusInfo'
          viewClass: App.CorpusInfoView
          controller: router.get('selectedCorpusController')

        appController.connectOutlet('search', 'regexSearch')

      #############################
      # Events for the index route
      #############################

      search: (router) ->
        router.get('regexSearchController').search()