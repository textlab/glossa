# NOTE: The class name of routes need to be prefixed with the name of their
# parent, while resources should not (cf.
# https://github.com/emberjs/ember.js/commit/
# e4af09edd357cdccfddfa684247bc43a6eaae0fe#commitcomment-2432875). So, it
# should be App.CorpusHomeRoute, but App.SearchRoute.
App.Router.map (match) ->

  # fetches the corpus
  @resource 'corpus', path: 'corp/:corpus_short_name', ->

    # sets up everything that is common to the search front page and result
    # pages, e.g. the metadata accordion in the sidebar etc.
    @resource 'search', ->

      # the "front page" for search that shows corpus info and search
      # interface
      @route 'front'

      # the search results page, which also allows further searches
      @route 'results', path: 'res/:search_id/:page_no'
